<?php 
    session_start();
    error_reporting (E_ALL ^ E_NOTICE);
    // $username = $_SESSION['username'];
    $id_c = $_SESSION['id'];
    $city = $_SESSION['name'];
 ?>
 
 <!DOCTYPE html>
<html lang="en">

  <head>
      <!-- Google Tag Manager -->
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
          new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
          'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-M27NPG2');
      </script>
      <!-- End Google Tag Manager -->
      <!-- Google Analytics -->
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-179163808-4', 'auto');
        ga('send', 'pageview');
      </script>
      <!-- End Google Analytics -->
      <title>About Mosque</title>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
      <link href="assets/css/bootstrap.css" rel="stylesheet">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
      <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
      <link href="assets/js/fancybox/jquery.fancybox.css" rel="stylesheet" />
      <link rel="stylesheet" type="text/css" href="assets/css/zabuto_calendar.css">
      <link rel="stylesheet" type="text/css" href="assets/js/gritter/css/jquery.gritter.css" />
      <link rel="stylesheet" type="text/css" href="assets/lineicons/style.css">
      <link href="assets/css/style.css" rel="stylesheet">
      <link href="assets/icomoon/styles.css" rel="stylesheet">
      <link href="assets/js/mystyle.css" rel="stylesheet">
      <link href="assets/css/style-responsive.css" rel="stylesheet">
      <script type="text/javascript" src="html5gallery/html5gallery.js"></script>
      <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
      
      <script src="script.js"></script>
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=UA-179163808-4"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-179163808-4');
      </script>

      <!-- TOMBOL ADD (FLOATING BUTTON) -->
      <style type="text/css">
        .act-btn
        {
            background: #2ab934;
            display: block;
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
            color: white;
            font-size: 20px;
            font-weight: bold;
            border-radius: 50%;
            -webkit-border-radius: 50%;
            text-decoration: none;
            transition: ease all 0.3s;
            position: fixed;
            right: 15px;
            bottom:21px;
        }
        .act-btn:hover{background: #ca2222}

        #container_about{
            padding:  5px 20px 20px 20px;
            margin: 0 auto;
            border-radius: 10px;
            margin-bottom: 10px;
        }
        .about{
            padding: 5px 15px 15px 15px;
            margin: 0 auto;
        }
      </style>

  </head>
  <body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M27NPG2"
      height="0" width="0" style="display:none;visibility:hidden"></iframe>
      </noscript>
  <!-- End Google Tag Manager (noscript) -->
    <section id="container_about" >   
      <div class="panel">
          <div class="panel-body" style="background-color: white;">  
              <div class="about">
                <h2 style="color: #26a69a; font-family: arial"><i class="fa fa-info-circle"></i><b> About Padang Mosque</b></h2> 
                  <div class="box-body" style="text-align: justify;">
                    <h3 style="color: #26a69a; font-family: arial"><b>Etymology: Padang Mosque</b></h3>
                      <p> <b>Padang City</b> is the capital city of West Sumatra Province which is located on the west coast of Sumatra Island, which is located between 0 ° 44'00 "–1 ° 08'35" South Latitude and 100 ° 05'05 "–100 ° 34'09" East Longitude. The area of Padang City is 694.96 km2, or 1.65% of the area of West Sumatra Province (Diskominfo Padang City, 2017), which consists of 11 sub-districts, with a population of 833,562 people (Central Statistics Agency, 2010). </p> 
                      <p> <b>A mosque</b> is a place of worship for Muslims or Muslims. Mosques are classified into 3 categories (Hassan, 2002), including:</p>
                        <ol>
                          <li> <b>Small mosque (musala)</b> : has at least a capacity for forty worshipers, and is often used in institutions, factories or schools. </li>
                          <li> <b>Mosque</b> : is the core of the community with a walking distance (150-200 m) and a capacity of not less than 200 worshipers. </li>
                          <li> <b>Grand Mosque (jami')</b> : is the largest mosque of all mosques, they are called Friday mosques, and the walking distance does not exceed (500 m).</li>
                        </ol> <br>
                      <p>One of the mosques that has become an icon for the city of Padang is the <b>Grand Mosque of West Sumatra</b>, which is the largest mosque in West Sumatra which is located on Jalan Khatib Sulaiman, North Padang District, Padang City. This mosque was completed on January 4, 2019 with a capacity of around 5,000–6,000 worshipers.</p>
                      <img src="assets/img/masjid raya sumbar.jpeg" alt="Gallery of Mosque" style="max-width: 350px; align: center;"> <br>
                      <caption>Padang City Icon</caption> <br><br>

                    <h3 style="color: #26a69a; font-family: arial"><b>Gallery of Padang Mosques</b></h3>
                      <p>In Padang City, there are currently 664 mosques and 677 prayer rooms spread across eleven sub-districts and registered in the Mosque Information System (SIMAS) issued by the Ministry of Religion of the Republic of Indonesia. Recommendations for mosques in Padang City are divided into tourist mosques, grand mosques, historical mosques, and recommended mosques located around tourist attractions in Padang City.</p> <br>

                    <!-- Tampil ekomendasi masjid pdg -->
                    <div class="form-group">
                      <label for="type_worship">Select Type: </label> <br>
                        <select name="type_worship" id="type_worship" class="form-control" onchange="getType()" style="width: 25%; ">
                        <?php  
                            include("connect.php");
                            $sql = mysqli_query($conn, "select worship_place.address, worship_place_type.id_type, worship_place_type.name as type, detail_worship_type.status from worship_place join detail_worship_type on worship_place.id=detail_worship_type.id join worship_place_type 
                            on detail_worship_type.id_type=worship_place_type.id_type, city 
                            WHERE city.id = '$id_c' AND ST_CONTAINS(city.geom, worship_place.geom) 
                            group by worship_place_type.name order by worship_place.id ASC");
                        ?>
                            <option value="x">- All -</option>";
                            <?php 
                                include("connect.php");    
                                while($row_type = mysqli_fetch_assoc($sql))
                                {
                                $id_t = $row_type['id_type'];
                                $name_t = $row_type['type'];
                                $address = $row_type['address'];
                                $status = $row_type['status'];
                            ?>
                            <option value="<?php echo $id_t ?>"><?php echo $name_t ?></option>";
                            <?php
                                }
                            ?>                  
                        </select>
                    </div> 

                    <!-- Tampil list masjid rekomendasi -->
                    <div class="box-body">
                    <div class="form-group">
                        <table id="example2" class="table table-hover table-bordered table-striped">
                        <thead>
                            <tr>
                            <th style="width: 7%; text-align: center;">ID</th>
                            <th style="width: 20%; text-align: center;">Name</th>
                            <th style="width: 45%; text-align: center;">Address</th>
                            <th style="width: 18%; text-align: center;">Type Mosque</th>
                            <th style="width: 10%; text-align: center;">Recommendation</th>
                            </tr>
                        </thead>
                        <tbody id="table_type">
                          <?php                    
                            $sql = mysqli_query($conn, "select worship_place.id, worship_place.address, worship_place.name as worship, worship_place_type.name as type, detail_worship_type.status 
                            from worship_place join detail_worship_type 
                                          on worship_place.id=detail_worship_type.id join worship_place_type 
                                          on detail_worship_type.id_type=worship_place_type.id_type, city 
                                          WHERE city.id = '$id_c' AND ST_CONTAINS(city.geom, worship_place.geom) AND detail_worship_type.status != '0'
                                          order by worship_place.id ASC");
                            while($data =  mysqli_fetch_array($sql))
                            {
                                $id   = $data['id'];
                                $name = $data['worship'];
                                $address = $data['address'];
                                $type = $data['type'];
                                $status = $row_type['status'];
                          ?>
                        
                            <tr>
                              <td style="text-align: center;"><?php echo "$id"; ?></td>
                              <td><?php echo "$name"; ?></td>
                              <td><?php echo "$address"; ?></td>
                              <td><?php echo "$type"; ?></td>
                              <td><?php echo "$status"; ?></td>
                            </tr>
                            <?php 
                            } 
                            ?>
                        </tbody>    
                        </table>
                    </div>                   
                    </div>

                    <!-- js ambil data tipe rekomendasi masjid -->
                    <script>
                    function getType() 
                    {
                        var id = document.getElementById("type_worship").value;
                        var pages = "http://localhost/masjid_pdg/admin/pages/";
                        $.ajax({url: pages+'type_worship_recom.php?id_type='+id, data: "", dataType: 'json', success: function(rows)
                        {
                            $('#table_type').empty();
                            for (var i in rows)
                            { 
                            var row = rows[i];
                            var id = row.id;
                            var worship = row.worship;
                            var type = row.type;
                            var address = row.address;
                            
                            console.log(worship);
                            $('#table_type').show();

                            $('#table_type').append(
                                "<tr><td>"+id+"</td><td>"+worship+"</td><td>"+address+"</td><td>"+type+"</td></tr>");
                            }//end for  
                        } //end function     
                        });//end ajax 
                    }
                    </script>

                    <!-- TOMBOL ADD DI ADMIN (FLOATING BUTTON) -->
                    <a onclick="print_about()" href="index.php" title="Print" style="color: white; background-color: #26a69a;" class="act-btn"><i class="icon-printer"></i>
                    </a>
                      
                  </div>
              </div>   
          </div>
      </div>
    </section>

    <!-- js placed at the end of the document so the pages load faster -->
    <script src="assets/js/jquery.js"></script>
    <script type="text/javascript" src="html5gallery/html5gallery.js"></script>
    <script src="assets/js/jquery-1.8.3.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script class="include" type="text/javascript" src="assets/js/jquery.dcjqaccordion.2.7.js"></script>
    <script src="assets/js/fancybox/jquery.fancybox.js"></script>
    <script src="assets/js/jquery.scrollTo.min.js"></script>
    <script src="assets/js/jquery.nicescroll.js" type="text/javascript"></script>
    <script src="assets/js/jquery.sparkline.js"></script>
    <script src="script.js" type="text/javascript"></script>
    <script src="assets/js/common-scripts.js"></script>

    <script type="text/javascript" src="assets/js/gritter/js/jquery.gritter.js"></script>
    <script type="text/javascript" src="assets/js/gritter-conf.js"></script>
    <!-- <script src="assets/js/advanced-form-components.js"></script> -->

	  <script type="text/javascript">
      $(function() {
        //    fancybox
          jQuery(".fancybox").fancybox();
      });
    </script>
    <script type="text/javascript">
      function print_about(){
        window.print();
      }
      
    </script>
  </body>
</html>
